{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport utf8 from 'utf8';\nimport base64 from 'base-64';\nvar handleLogin = function () {\n  var _ref = _asyncToGenerator(function* () {\n    var texto = `${username}:${password}`;\n    var bytes = utf8.encode(texto);\n    var encoded = base64.encode(bytes);\n    console.log('token ' + encoded);\n    try {\n      var response = yield fetch('http://ti.ararangua.sc.gov.br:10000/glpi/apirest.php/initSession', {\n        method: \"GET\",\n        headers: {\n          'App-Token': 'D8lhQKHjvcfLNrqluCoeZXFvZptmDDAGhWl17V2R',\n          'Authorization': 'Basic ' + encoded\n        }\n      });\n      var json = yield response.json();\n      console.log(json);\n      if (!username || !password) {\n        Alert.alert('Erro', 'Preencha todos os campos');\n        return;\n      }\n      if (json && json[0] === 'ERROR_GLPI_LOGIN') {\n        Alert.alert('Erro', 'Nome de usuário ou senha inválidos. Tente novamente.');\n      } else {\n        yield AsyncStorage.setItem('Credenciais', JSON.stringify({\n          username: username,\n          password: password\n        }));\n        navigation.navigate('Serviços');\n      }\n    } catch (error) {\n      console.error(error);\n      Alert.alert('Erro', 'Falha ao autenticar. Verifique suas credenciais e tente novamente.');\n    }\n  });\n  return function handleLogin() {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport default handleLogin;","map":{"version":3,"names":["utf8","base64","handleLogin","_ref","_asyncToGenerator","texto","username","password","bytes","encode","encoded","console","log","response","fetch","method","headers","json","Alert","alert","AsyncStorage","setItem","JSON","stringify","navigation","navigate","error","apply","arguments"],"sources":["/home/luigi/Documentos/Projeto/glpi-app-react/src/pages/Components/ApiGlobal.js"],"sourcesContent":["import utf8 from 'utf8'\nimport base64 from 'base-64'\n\n  const handleLogin = async () => {\n    const texto = `${username}:${password}`;\n    const bytes = utf8.encode(texto);\n    const encoded = base64.encode(bytes);\n    console.log('token ' + encoded);\n  \n\n  try {\n      const response = await fetch('http://ti.ararangua.sc.gov.br:10000/glpi/apirest.php/initSession', {\n          method: \"GET\",\n          headers: {\n              'App-Token': 'D8lhQKHjvcfLNrqluCoeZXFvZptmDDAGhWl17V2R',\n              'Authorization': 'Basic ' + encoded\n          },\n      });\n      const json = await response.json();\n      console.log(json)\n      if (!username || !password) {\n          Alert.alert('Erro', 'Preencha todos os campos');\n          return;\n      }\n      if (json && json[0] === 'ERROR_GLPI_LOGIN') {\n          Alert.alert('Erro', 'Nome de usuário ou senha inválidos. Tente novamente.');\n      } else {\n          await AsyncStorage.setItem('Credenciais', JSON.stringify({ username, password }));\n          navigation.navigate('Serviços');\n      }\n  } catch (error) {\n      console.error(error);\n      Alert.alert('Erro', 'Falha ao autenticar. Verifique suas credenciais e tente novamente.');\n  }\n  \n};\nexport default handleLogin;"],"mappings":";AAAA,OAAOA,IAAI,MAAM,MAAM;AACvB,OAAOC,MAAM,MAAM,SAAS;AAE1B,IAAMC,WAAW;EAAA,IAAAC,IAAA,GAAAC,iBAAA,CAAG,aAAY;IAC9B,IAAMC,KAAK,GAAI,GAAEC,QAAS,IAAGC,QAAS,EAAC;IACvC,IAAMC,KAAK,GAAGR,IAAI,CAACS,MAAM,CAACJ,KAAK,CAAC;IAChC,IAAMK,OAAO,GAAGT,MAAM,CAACQ,MAAM,CAACD,KAAK,CAAC;IACpCG,OAAO,CAACC,GAAG,CAAC,QAAQ,GAAGF,OAAO,CAAC;IAGjC,IAAI;MACA,IAAMG,QAAQ,SAASC,KAAK,CAAC,kEAAkE,EAAE;QAC7FC,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACL,WAAW,EAAE,0CAA0C;UACvD,eAAe,EAAE,QAAQ,GAAGN;QAChC;MACJ,CAAC,CAAC;MACF,IAAMO,IAAI,SAASJ,QAAQ,CAACI,IAAI,CAAC,CAAC;MAClCN,OAAO,CAACC,GAAG,CAACK,IAAI,CAAC;MACjB,IAAI,CAACX,QAAQ,IAAI,CAACC,QAAQ,EAAE;QACxBW,KAAK,CAACC,KAAK,CAAC,MAAM,EAAE,0BAA0B,CAAC;QAC/C;MACJ;MACA,IAAIF,IAAI,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,kBAAkB,EAAE;QACxCC,KAAK,CAACC,KAAK,CAAC,MAAM,EAAE,sDAAsD,CAAC;MAC/E,CAAC,MAAM;QACH,MAAMC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEjB,QAAQ,EAARA,QAAQ;UAAEC,QAAQ,EAARA;QAAS,CAAC,CAAC,CAAC;QACjFiB,UAAU,CAACC,QAAQ,CAAC,UAAU,CAAC;MACnC;IACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;MACZf,OAAO,CAACe,KAAK,CAACA,KAAK,CAAC;MACpBR,KAAK,CAACC,KAAK,CAAC,MAAM,EAAE,oEAAoE,CAAC;IAC7F;EAEF,CAAC;EAAA,gBAhCOjB,WAAWA,CAAA;IAAA,OAAAC,IAAA,CAAAwB,KAAA,OAAAC,SAAA;EAAA;AAAA,GAgClB;AACD,eAAe1B,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}