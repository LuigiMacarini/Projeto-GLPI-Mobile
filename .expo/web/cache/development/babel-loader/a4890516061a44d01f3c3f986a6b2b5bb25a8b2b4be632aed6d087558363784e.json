{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport utf8 from 'utf8';\nimport base64 from 'base-64';\nvar Globals = _createClass(function Globals() {\n  _classCallCheck(this, Globals);\n});\nGlobals.session_Token = _asyncToGenerator(function* () {\n  var texto = `${username}:${password}`;\n  var bytes = utf8.encode(texto);\n  var encoded = base64.encode(bytes);\n  console.log('token ' + encoded);\n  try {\n    var response = yield fetch('http://ti.ararangua.sc.gov.br:10000/glpi/apirest.php/initSession', {\n      method: \"GET\",\n      headers: {\n        'App-Token': 'D8lhQKHjvcfLNrqluCoeZXFvZptmDDAGhWl17V2R',\n        'Authorization': 'Basic ' + encoded\n      }\n    });\n    var json = yield response.json();\n    console.log(json);\n    if (!username || !password) {\n      Alert.alert('Erro', 'Preencha todos os campos');\n      return;\n    }\n    if (json && json[0] === 'ERROR_GLPI_LOGIN') {\n      Alert.alert('Erro', 'Nome de usuário ou senha inválidos. Tente novamente.');\n    } else {\n      yield AsyncStorage.setItem('Credenciais', JSON.stringify({\n        username: username,\n        password: password\n      }));\n      navigation.navigate('Serviços');\n    }\n  } catch (error) {\n    console.error(error);\n    Alert.alert('Erro', 'Falha ao autenticar. Verifique suas credenciais e tente novamente.');\n  }\n});\nconsole.log(session_Token);\nexport default Globals;","map":{"version":3,"names":["utf8","base64","Globals","_createClass","_classCallCheck","session_Token","_asyncToGenerator","texto","username","password","bytes","encode","encoded","console","log","response","fetch","method","headers","json","Alert","alert","AsyncStorage","setItem","JSON","stringify","navigation","navigate","error"],"sources":["/home/luigi/Documentos/Projeto/glpi-app-react/src/pages/Components/globals.js"],"sourcesContent":["import utf8 from 'utf8'\nimport base64 from 'base-64'\nclass Globals{\n    static session_Token = async () => {\n        const texto = `${username}:${password}`;\n        const bytes = utf8.encode(texto);\n        const encoded = base64.encode(bytes);\n        console.log('token ' + encoded);\n\n        try {\n            const response = await fetch('http://ti.ararangua.sc.gov.br:10000/glpi/apirest.php/initSession', {\n                method: \"GET\",\n                headers: {\n                    'App-Token': 'D8lhQKHjvcfLNrqluCoeZXFvZptmDDAGhWl17V2R',\n                    'Authorization': 'Basic ' + encoded\n                },\n            });\n            const json = await response.json();\n            console.log(json);\n            if (!username || !password) {\n                Alert.alert('Erro', 'Preencha todos os campos');\n                return;\n            }\n            if (json && json[0] === 'ERROR_GLPI_LOGIN') {\n                Alert.alert('Erro', 'Nome de usuário ou senha inválidos. Tente novamente.');\n            } else {\n                await AsyncStorage.setItem('Credenciais', JSON.stringify({ username, password }));\n                navigation.navigate('Serviços');\n            }\n        } catch (error) {\n            console.error(error);\n            Alert.alert('Erro', 'Falha ao autenticar. Verifique suas credenciais e tente novamente.');\n        }\n        \n    };\n\n}\n\nconsole.log(session_Token);\nexport default Globals;"],"mappings":";;;AAAA,OAAOA,IAAI,MAAM,MAAM;AACvB,OAAOC,MAAM,MAAM,SAAS;AAAA,IACtBC,OAAO,GAAAC,YAAA,UAAAD,QAAA;EAAAE,eAAA,OAAAF,OAAA;AAAA;AAAPA,OAAO,CACFG,aAAa,GAAAC,iBAAA,CAAG,aAAY;EAC/B,IAAMC,KAAK,GAAI,GAAEC,QAAS,IAAGC,QAAS,EAAC;EACvC,IAAMC,KAAK,GAAGV,IAAI,CAACW,MAAM,CAACJ,KAAK,CAAC;EAChC,IAAMK,OAAO,GAAGX,MAAM,CAACU,MAAM,CAACD,KAAK,CAAC;EACpCG,OAAO,CAACC,GAAG,CAAC,QAAQ,GAAGF,OAAO,CAAC;EAE/B,IAAI;IACA,IAAMG,QAAQ,SAASC,KAAK,CAAC,kEAAkE,EAAE;MAC7FC,MAAM,EAAE,KAAK;MACbC,OAAO,EAAE;QACL,WAAW,EAAE,0CAA0C;QACvD,eAAe,EAAE,QAAQ,GAAGN;MAChC;IACJ,CAAC,CAAC;IACF,IAAMO,IAAI,SAASJ,QAAQ,CAACI,IAAI,CAAC,CAAC;IAClCN,OAAO,CAACC,GAAG,CAACK,IAAI,CAAC;IACjB,IAAI,CAACX,QAAQ,IAAI,CAACC,QAAQ,EAAE;MACxBW,KAAK,CAACC,KAAK,CAAC,MAAM,EAAE,0BAA0B,CAAC;MAC/C;IACJ;IACA,IAAIF,IAAI,IAAIA,IAAI,CAAC,CAAC,CAAC,KAAK,kBAAkB,EAAE;MACxCC,KAAK,CAACC,KAAK,CAAC,MAAM,EAAE,sDAAsD,CAAC;IAC/E,CAAC,MAAM;MACH,MAAMC,YAAY,CAACC,OAAO,CAAC,aAAa,EAAEC,IAAI,CAACC,SAAS,CAAC;QAAEjB,QAAQ,EAARA,QAAQ;QAAEC,QAAQ,EAARA;MAAS,CAAC,CAAC,CAAC;MACjFiB,UAAU,CAACC,QAAQ,CAAC,UAAU,CAAC;IACnC;EACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZf,OAAO,CAACe,KAAK,CAACA,KAAK,CAAC;IACpBR,KAAK,CAACC,KAAK,CAAC,MAAM,EAAE,oEAAoE,CAAC;EAC7F;AAEJ,CAAC;AAILR,OAAO,CAACC,GAAG,CAACT,aAAa,CAAC;AAC1B,eAAeH,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}